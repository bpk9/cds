PieChart is a wrapper for [PolarChart](/components/graphs/PolarChart) that makes it easy to create pie charts, supporting a single angular/radial axis pair. Charts are built using `@shopify/react-native-skia`.

## Setup

Before using PieChart, you need to wrap your app with `ChartBridgeProvider`. This enables charts to access CDS theming and other React contexts within the Skia renderer. See [CartesianChart](/components/graphs/CartesianChart/#setup) for details.

## Basics

The only prop required is `series`, which takes an array of series objects. Each series object needs an `id` and a `data` number representing the slice value.

```jsx
<PieChart
  height={200}
  series={[
    { id: 'a', data: 30, label: 'Category A', color: 'rgb(var(--blue40))' },
    { id: 'b', data: 20, label: 'Category B', color: 'rgb(var(--purple40))' },
    { id: 'c', data: 15, label: 'Category C', color: 'rgb(var(--pink50))' },
    { id: 'd', data: 10, label: 'Category D', color: 'rgb(var(--orange40))' },
    { id: 'e', data: 15, label: 'Category E', color: 'rgb(var(--yellow40))' },
    { id: 'f', data: 10, label: 'Category F', color: 'rgb(var(--green40))' },
  ]}
/>
```

## Styling

### Corner Radius

Use `cornerRadius` to round the corners of each slice.

```jsx
function CornerRadiusExample() {
  const theme = useTheme();

  return (
    <HStack gap={4} justifyContent="center">
      <PieChart
        height={100}
        width={100}
        cornerRadius={0}
        series={[
          { id: 'a', data: 30, color: `rgb(${theme.spectrum.blue40})` },
          { id: 'b', data: 40, color: `rgb(${theme.spectrum.green40})` },
          { id: 'c', data: 30, color: `rgb(${theme.spectrum.orange40})` },
        ]}
      />
      <PieChart
        height={100}
        width={100}
        cornerRadius={8}
        series={[
          { id: 'a', data: 30, color: `rgb(${theme.spectrum.blue40})` },
          { id: 'b', data: 40, color: `rgb(${theme.spectrum.green40})` },
          { id: 'c', data: 30, color: `rgb(${theme.spectrum.orange40})` },
        ]}
      />
    </HStack>
  );
}
```

### Stroke

Use `stroke` and `strokeWidth` to add borders between slices.

```jsx
function StrokeExample() {
  const theme = useTheme();

  return (
    <PieChart
      height={200}
      stroke={theme.color.bg}
      strokeWidth={3}
      cornerRadius={8}
      series={[
        { id: 'a', data: 25, color: `rgb(${theme.spectrum.blue40})` },
        { id: 'b', data: 25, color: `rgb(${theme.spectrum.green40})` },
        { id: 'c', data: 25, color: `rgb(${theme.spectrum.purple40})` },
        { id: 'd', data: 25, color: `rgb(${theme.spectrum.orange40})` },
      ]}
    />
  );
}
```

### Padding Between Slices

Use `angularAxis` with `paddingAngle` to add gaps between slices.

```jsx
function PaddingExample() {
  const theme = useTheme();

  return (
    <PieChart
      height={200}
      angularAxis={{ paddingAngle: 4 }}
      series={[
        { id: 'a', data: 30, color: `rgb(${theme.spectrum.blue40})` },
        { id: 'b', data: 40, color: `rgb(${theme.spectrum.purple40})` },
        { id: 'c', data: 30, color: `rgb(${theme.spectrum.orange40})` },
      ]}
    />
  );
}
```

## Partial Charts

### Semicircle

Use `angularAxis` with `range` to create partial pie charts like semicircles.

```jsx
function SemicircleChart() {
  const theme = useTheme();

  return (
    <PieChart
      height={120}
      angularAxis={{ range: { min: -90, max: 90 } }}
      series={[
        { id: 'low', data: 25, label: 'Low', color: `rgb(${theme.spectrum.green40})` },
        { id: 'medium', data: 50, label: 'Medium', color: `rgb(${theme.spectrum.yellow40})` },
        { id: 'high', data: 25, label: 'High', color: `rgb(${theme.spectrum.red40})` },
      ]}
      legend
      legendPosition="bottom"
    />
  );
}
```

### Quarter Pie

```jsx
function QuarterPieChart() {
  const theme = useTheme();

  return (
    <PieChart
      height={150}
      width={150}
      angularAxis={{ range: { min: 0, max: 90 } }}
      cornerRadius={4}
      series={[
        { id: 'a', data: 40, color: `rgb(${theme.spectrum.blue40})` },
        { id: 'b', data: 35, color: `rgb(${theme.spectrum.green40})` },
        { id: 'c', data: 25, color: `rgb(${theme.spectrum.purple40})` },
      ]}
    />
  );
}
```

## Animations

PieChart animates by default when data changes. You can disable animations by setting `animate` to `false`.

```jsx
function AnimatedPieChart() {
  const theme = useTheme();
  const [dataSet, setDataSet] = useState(0);

  const dataSets = useMemo(
    () => [
      [
        { id: 'a', data: 30, color: `rgb(${theme.spectrum.blue40})` },
        { id: 'b', data: 40, color: `rgb(${theme.spectrum.green40})` },
        { id: 'c', data: 30, color: `rgb(${theme.spectrum.orange40})` },
      ],
      [
        { id: 'a', data: 50, color: `rgb(${theme.spectrum.blue40})` },
        { id: 'b', data: 30, color: `rgb(${theme.spectrum.green40})` },
        { id: 'c', data: 20, color: `rgb(${theme.spectrum.orange40})` },
      ],
      [
        { id: 'a', data: 20, color: `rgb(${theme.spectrum.blue40})` },
        { id: 'b', data: 50, color: `rgb(${theme.spectrum.green40})` },
        { id: 'c', data: 30, color: `rgb(${theme.spectrum.orange40})` },
      ],
    ],
    [theme],
  );

  return (
    <VStack alignItems="center" gap={4}>
      <PieChart animate height={200} series={dataSets[dataSet]} />
      <HStack alignItems="center" gap={2}>
        <IconButton
          accessibilityHint="Switch to previous data set"
          accessibilityLabel="Previous"
          name="arrowLeft"
          onPress={() => setDataSet((prev) => (prev - 1 + dataSets.length) % dataSets.length)}
          variant="secondary"
        />
        <Text font="label1">Data Set {dataSet + 1}</Text>
        <IconButton
          accessibilityHint="Switch to next data set"
          accessibilityLabel="Next"
          name="arrowRight"
          onPress={() => setDataSet((prev) => (prev + 1) % dataSets.length)}
          variant="secondary"
        />
      </HStack>
    </VStack>
  );
}
```

## Tooltip

Use `enableHighlighting` with `ChartTooltip` to show values on hover. The `valueFormatter` prop customizes how values are displayed.

```jsx
function PieWithTooltip() {
  const theme = useTheme();

  const series = useMemo(
    () => [
      { id: 'stocks', data: 45, label: 'Stocks', color: `rgb(${theme.spectrum.blue40})` },
      { id: 'bonds', data: 25, label: 'Bonds', color: `rgb(${theme.spectrum.green40})` },
      { id: 'crypto', data: 20, label: 'Crypto', color: `rgb(${theme.spectrum.orange40})` },
      { id: 'cash', data: 10, label: 'Cash', color: `rgb(${theme.spectrum.gray40})` },
    ],
    [theme],
  );

  const total = useMemo(() => series.reduce((sum, s) => sum + s.data, 0), [series]);

  const percentFormatter = useCallback(
    (value) => {
      const percent = Math.round((value / total) * 100);
      return `${percent}% of portfolio`;
    },
    [total],
  );

  return (
    <PieChart
      enableHighlighting
      height={200}
      cornerRadius={4}
      series={series}
      legend
      legendPosition="right"
    >
      <ChartTooltip label="Asset Allocation" valueFormatter={percentFormatter} />
    </PieChart>
  );
}
```

## Composed Examples

### Category Distribution

```jsx
function CategoryDistribution() {
  const theme = useTheme();

  const series = useMemo(
    () => [
      { id: 'tech', data: 35, label: 'Technology', color: `rgb(${theme.spectrum.blue40})` },
      { id: 'health', data: 25, label: 'Healthcare', color: `rgb(${theme.spectrum.green40})` },
      { id: 'finance', data: 20, label: 'Finance', color: `rgb(${theme.spectrum.purple40})` },
      { id: 'energy', data: 12, label: 'Energy', color: `rgb(${theme.spectrum.orange40})` },
      { id: 'other', data: 8, label: 'Other', color: `rgb(${theme.spectrum.gray40})` },
    ],
    [theme],
  );

  return (
    <PieChart
      height={200}
      cornerRadius={4}
      stroke={theme.color.bg}
      strokeWidth={2}
      series={series}
      legend
      legendPosition="right"
    />
  );
}
```

### Gauge Chart

A semicircle pie chart can be used as a gauge to show progress or status.

```jsx
function GaugeChart() {
  const theme = useTheme();
  const value = 72;
  const max = 100;

  return (
    <PieChart
      height={120}
      angularAxis={{ range: { min: -90, max: 90 } }}
      cornerRadius={100}
      series={[
        { id: 'value', data: value, label: `${value}%`, color: `rgb(${theme.spectrum.green40})` },
        { id: 'remaining', data: max - value, color: `rgb(${theme.spectrum.gray20})` },
      ]}
      legend
      legendPosition="bottom"
    />
  );
}
```

### Compact Pie

For smaller spaces, you can create compact pie charts.

```jsx
function CompactPie() {
  const theme = useTheme();

  return (
    <HStack gap={4}>
      <HStack gap={2} alignItems="center">
        <PieChart
          height={40}
          width={40}
          series={[
            { id: 'a', data: 60, color: `rgb(${theme.spectrum.blue40})` },
            { id: 'b', data: 40, color: `rgb(${theme.spectrum.gray20})` },
          ]}
        />
        <VStack gap={0}>
          <Text font="label1">60%</Text>
          <Text font="label2" color="fgMuted">
            Allocation
          </Text>
        </VStack>
      </HStack>
      <HStack gap={2} alignItems="center">
        <PieChart
          height={40}
          width={40}
          series={[
            { id: 'a', data: 33, color: `rgb(${theme.spectrum.blue40})` },
            { id: 'b', data: 33, color: `rgb(${theme.spectrum.green40})` },
            { id: 'c', data: 34, color: `rgb(${theme.spectrum.purple40})` },
          ]}
        />
        <VStack gap={0}>
          <Text font="label1">Equal</Text>
          <Text font="label2" color="fgMuted">
            Split
          </Text>
        </VStack>
      </HStack>
    </HStack>
  );
}
```
